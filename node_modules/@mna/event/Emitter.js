"use strict";var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _Object$defineProperty=require("@babel/runtime-corejs3/core-js-stable/object/define-property");require("core-js/modules/es.array.iterator");require("core-js/modules/es.regexp.constructor");require("core-js/modules/es.regexp.to-string");require("core-js/modules/es.string.match");require("core-js/modules/web.dom-collections.iterator");_Object$defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _map=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/map"));var _filter=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/filter"));class Emitter{constructor(){this.listeners=[];}on(pattern,callback){this.listeners.push({pattern,callback});return()=>this.off(pattern,callback);}once(pattern,callback){let done;done=this.on(pattern,function(...args){done();return callback(...args);});}off(pattern,callback){var _context;this.listeners=(0,_filter.default)(_context=this.listeners).call(_context,l=>pattern&&!(pattern===l.pattern&&callback===l.callback));}emit(event,...args){var _context2;return(0,_map.default)(_context2=this.listeners).call(_context2,listener=>{const pattern=listener.pattern,callback=listener.callback;if(!callback)return;const matches=pattern instanceof RegExp?event.match(pattern):event===pattern;if(matches&&(matches===true||matches.length)){return callback(...args);}});}}exports.default=Emitter;module.exports=exports.default;