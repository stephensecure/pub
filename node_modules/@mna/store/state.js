"use strict";var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _Object$defineProperty=require("@babel/runtime-corejs3/core-js-stable/object/define-property");_Object$defineProperty(exports,"__esModule",{value:true});exports.default=withState;var _stringify=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/json/stringify"));var _isArray=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/array/is-array"));var _assign=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/assign"));var _keys=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/keys"));var _forEach=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/for-each"));function withState(store,props){const state={};const getState=key=>key?state[key]:state;const setState=(newState={},options={})=>{if(options.reset){var _context;(0,_forEach.default)(_context=(0,_keys.default)(state)).call(_context,key=>delete state[key]);}(0,_assign.default)(state,newState);if(options.silent)return;store.emit('setState',state);};const extendState=fn=>(0,_isArray.default)(fn)?(0,_forEach.default)(fn).call(fn,extendState):(0,_assign.default)(state,fn instanceof Function?fn():fn);(0,_assign.default)(store,{state,getState,setState,extendState});if(props.state)props.createState=()=>JSON.parse((0,_stringify.default)(props.state));if(props.createState)extendState(props.createState);return store;}module.exports=exports.default;