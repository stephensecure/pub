"use strict";var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _Object$defineProperty2=require("@babel/runtime-corejs3/core-js-stable/object/define-property");_Object$defineProperty2(exports,"__esModule",{value:true});exports.default=withChildStores;var _defineProperty2=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/define-property"));var _defineProperties=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/define-properties"));var _getOwnPropertyDescriptors=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors"));var _getOwnPropertyDescriptor=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor"));var _filter=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/filter"));var _getOwnPropertySymbols=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols"));var _concat=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/concat"));var _defineProperty3=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/defineProperty"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/objectWithoutProperties"));var _keys=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/object/keys"));var _forEach=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/for-each"));function ownKeys(object,enumerableOnly){var keys=(0,_keys.default)(object);if(_getOwnPropertySymbols.default){var symbols=(0,_getOwnPropertySymbols.default)(object);if(enumerableOnly)symbols=(0,_filter.default)(symbols).call(symbols,function(sym){return(0,_getOwnPropertyDescriptor.default)(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){var _context4;(0,_forEach.default)(_context4=ownKeys(Object(source),true)).call(_context4,function(key){(0,_defineProperty3.default)(target,key,source[key]);});}else if(_getOwnPropertyDescriptors.default){(0,_defineProperties.default)(target,(0,_getOwnPropertyDescriptors.default)(source));}else{var _context5;(0,_forEach.default)(_context5=ownKeys(Object(source))).call(_context5,function(key){(0,_defineProperty2.default)(target,key,(0,_getOwnPropertyDescriptor.default)(source,key));});}}return target;}function withChildStores(store,props,createStore){store.childStores={};const addChildStores=childStores=>{var _context;return(0,_forEach.default)(_context=(0,_keys.default)(childStores)).call(_context,key=>{const childStore=createStore(childStores[key]);store.childStores[key]=childStore;store.state[key]=childStore.getState();store.actions[key]=childStore.actions;if(!store[key])store[key]=childStore;childStore.on('setState',childState=>store.setState({[key]:childState}));childStore.on('action',(_ref)=>{var _context2;let name=_ref.name,args=(0,_objectWithoutProperties2.default)(_ref,["name"]);store.emit('action',_objectSpread({name:(0,_concat.default)(_context2="".concat(key,".")).call(_context2,name)},args));});childStore.on('actionError',(_ref2)=>{var _context3;let name=_ref2.name,args=(0,_objectWithoutProperties2.default)(_ref2,["name"]);store.emit('actionError',_objectSpread({name:(0,_concat.default)(_context3="".concat(key,".")).call(_context3,name)},args));});});};store.addChildStores=addChildStores;if(props.stores)addChildStores(props.stores);return store;}module.exports=exports.default;