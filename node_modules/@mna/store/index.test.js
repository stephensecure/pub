"use strict";var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime-corejs3/regenerator"));var _promise=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/promise"));require("regenerator-runtime/runtime");var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/asyncToGenerator"));var _index=_interopRequireDefault(require("./index"));test('Store',function(){var _ref=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(it){var store;return _regenerator.default.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:store=(0,_index.default)({createState:()=>({count:1}),actions:{plus({state,setState}){setState({count:state.count+1});},plusChild({actions}){actions.child.plus();}},stores:{child:{createState:()=>({count:1}),actions:{plus({state,setState}){setState({count:state.count+1});}}}}});it('Creates a store',store);it('Has initial state',store.getState().count===1);store.plus();it('Updates after action',store.getState().count===2);it('Creates a child store',store.child);it('Has initial child state',store.getState().child.count===1);it('Has child actions',store.child.plus);_context.next=10;return new _promise.default((resolve,reject)=>{store.once('setState',()=>{it('Child action emits parent setState',true);it('Child action updates parent state',store.getState().child.count===2);it('Child action updates child state',store.child.getState().count===2);it('Child state references the same object in parent state',store.child.getState()===store.getState().child);resolve();});store.child.plus();});case 10:store.plusChild();it('Parent action can run child actions',store.getState().child.count===3);case 12:case"end":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());