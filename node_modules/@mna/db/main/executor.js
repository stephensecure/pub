"use strict";var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _setImmediate2=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/set-immediate"));let asyncQueue=require('neo-async/queue');function Executor(){this.buffer=[];this.ready=false;this.queue=asyncQueue(function(task,cb){let newArguments=[];for(let i=0;i<task.arguments.length;i+=1){newArguments.push(task.arguments[i]);}let lastArg=task.arguments[task.arguments.length-1];if(typeof lastArg==='function'){newArguments[newArguments.length-1]=function(){if(typeof _setImmediate2.default==='function'){(0,_setImmediate2.default)(cb);}else{process.nextTick(cb);}lastArg.apply(null,arguments);};}else if(!lastArg&&task.arguments.length!==0){newArguments[newArguments.length-1]=function(){cb();};}else{newArguments.push(function(){cb();});}task.fn.apply(task.this,newArguments);},1);}Executor.prototype.push=function(task,forceQueuing){if(this.ready||forceQueuing){this.queue.push(task);}else{this.buffer.push(task);}};Executor.prototype.processBuffer=function(){let i;this.ready=true;for(i=0;i<this.buffer.length;i+=1){this.queue.push(this.buffer[i]);}this.buffer=[];};module.exports=Executor;