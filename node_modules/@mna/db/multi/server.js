"use strict";var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault");var _bind=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/bind"));var _map=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/map"));const axon=require('axon');const handler=require("./lib/handler");const port=Number(process.env.NEDB_MULTI_PORT)||Number(process.argv[2]);const dbsMap=new _map.default();const repSocket=axon.socket('rep');const messagesHandler=handler.create(dbsMap);(0,_bind.default)(repSocket).call(repSocket,port);repSocket.on('message',messagesHandler);